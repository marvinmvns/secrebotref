<!-- views/new.ejs -->

<h2>Adicionar Nova Mensagem</h2>

<form action="/messages" method="POST">
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="recipient">Destinatário</label>
      <input type="text" name="recipient" class="form-control" required placeholder="e.g., +5511999999999" value="<%= message ? message.recipient : '' %>">
      <small class="form-text text-muted">Inclua o código do país, exemplo: +5511999999999</small>
    </div>
    <div class="form-group col-md-6">
      <label for="status">Status</label>
      <select name="status" class="form-control">
        <option value="approved" selected>Aprovado</option>
        <option value="sent">Enviado</option>
        <option value="failed">Falhou</option>
      </select>
    </div>
  </div>

  <div class="form-group">
    <label for="message">Conteúdo da Mensagem</label>
    <textarea name="message" class="form-control" rows="4" required><%= message ? message.message : '' %></textarea>
  </div>

  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="scheduledTime">Horário Agendado</label>
      <input type="datetime-local" name="scheduledTime" class="form-control" required value="<%= message && message.scheduledTime ? message.scheduledTime.toISOString().slice(0,16) : '' %>">
    </div>
    <div class="form-group col-md-6">
      <label for="expiryTime">Horário de Expiração</label>
      <input type="datetime-local" name="expiryTime" class="form-control" required value="<%= message && message.expiryTime ? message.expiryTime.toISOString().slice(0,16) : '' %>">
    </div>
  </div>

  <button type="submit" class="btn btn-success">Criar Mensagem</button>
  <a href="/" class="btn btn-secondary">Cancelar</a>
</form>